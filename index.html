<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>みにまるスペリング【ReTuned】</title>
  <style>
    body {
      background-color: #D7C4A3; /* Latte */
      color: #3E2723; /* Dark Chocolate */
      font-family: 'Segoe UI', sans-serif;
      padding: 20px;
    }

    h1, h2 {
      color: #4B3832; /* Coffee Brown */
    }

    button {
      background-color: #7B3F00; /* Cinnamon */
      color: #FFF5E1; /* Buttercream */
      padding: 12px 28px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #5C2E00;
    }

    input[type="text"] {
      width: 220px;
      height: 40px;
      padding: 8px 12px;
      border: 1px solid #A67B5B;
      border-radius: 6px;
      font-size: 18px;
      background-color: #FFF5E1; /* Buttercream */
      color: #3E2723;
    }

    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 10px;
      background-color: #FFF5E1;
    }

    th, td {
      border: 1px solid #A67B5B;
      text-align: left;
      padding: 8px;
    }

    th {
      background-color: #7B3F00;
      color: white;
    }

    tr:nth-child(even) {
      background-color: #f9f2e7;
    }

    #result {
      margin-top: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>みにまる-ReTuned</h1>
  <p>次の空欄に当てはまる語句を入力</p>
  <div id="question-container">
    <p id="question"></p>
    <input type="text" id="answer" placeholder="回答">
    <button type="button" onclick="checkAnswer()">確定</button>
    <p id="result"></p>
  </div>

  <h2>結果</h2>
  <p>ミスした単語</p>
  <table id="resultTable">
    <tr>
      <th>問題</th>
      <th>あなたの回答</th>
      <th>正解</th>
    </tr>
  </table>

<script>
const problems = [
  { question: "名所/landmarks", answer: "landmarks" },
  { question: "認知症/dementia", answer: "dementia" },
  { question: "肉/flesh", answer: "flesh" },
  { question: "衝突/collision", answer: "collision" },
  { question: "危険なもの/hazard", answer: "hazard" },
  { question: "墓/tomb", answer: "tomb" },
  { question: "注射/injections", answer: "injections" },
  { question: "飛躍的進歩/breakthrough", answer: "breakthrough" },
  { question: "革/leather", answer: "leather" },
  { question: "宝石/jewelry", answer: "jewelry" },
  { question: "合図/cues", answer: "cues" },
  { question: "救急車/ambulance", answer: "ambulance" },
  { question: "不動産/estate", answer: "estate" },
  { question: "商品/commodity", answer: "commodity" },
  { question: "出発(時刻)/departure", answer: "departure" },
  { question: "段階/phase", answer: "phase" },
  { question: "泥棒/thief", answer: "thief" },
  { question: "聖/Saint", answer: "Saint" },
  { question: "彫刻/sculpture", answer: "sculpture" },
  { question: "悲しみ/grief", answer: "grief" },
  { question: "車線/lane", answer: "lane" },
  { question: "捕食動物/predators", answer: "predators" },
  { question: "流体/fluids", answer: "fluids" },
  { question: "はげみ/incentive", answer: "incentive" },
  { question: "花嫁/bride", answer: "bride" },
  { question: "介入/intervention", answer: "intervention" },
  { question: "(大)差/margin", answer: "margin" },
  { question: "伝記/biography", answer: "biography" },
  { question: "同意/consent", answer: "consent" },
  { question: "火山/volcano", answer: "volcano" },
  { question: "反逆者/rebels", answer: "rebels" },
  { question: "比喩/metaphor", answer: "metaphor" },
  { question: "法律/legislation", answer: "legislation" },
  { question: "雷/lightning", answer: "lightning" },
  { question: "殺虫剤/pesticides", answer: "pesticides" },
  { question: "コラム/column", answer: "column" },
  { question: "うわさ/rumor", answer: "rumor" },
  { question: "ほこり/dust", answer: "dust" },
  { question: "対話/dialogue", answer: "dialogue" },
  { question: "幼稚園/kindergarten", answer: "kindergarten" },
  { question: "糖尿病/diabetes", answer: "diabetes" },
  { question: "肥満/obesity", answer: "obesity" },
  { question: "特許/patent", answer: "patent" },
  { question: "章/chapter", answer: "chapter" },
  { question: "宮殿/Palace", answer: "Palace" },
  { question: "洗濯/laundry", answer: "laundry" },
  { question: "病棟/ward", answer: "ward" },
  { question: "ぼっ発/outbreak", answer: "outbreak" },
  { question: "方程式/equation", answer: "equation" },
  { question: "考古学者/archaeologist", answer: "archaeologist" }
];

let results = [];
function checkAnswer() {
  if (problems.length === 0) return;

  const userAnswer = document.getElementById("answer").value.trim().toLowerCase();
  const currentProblem = problems[0];
  const correctAnswer = currentProblem.answer.toLowerCase();
  const resultElement = document.getElementById("result");
  document.getElementById("answer").value = "";

  let delay;

  if (userAnswer === correctAnswer) {
    resultElement.textContent = "正解！次の問題に進んでください。";
    delay = 300; // 正解時の待機時間
  } else {
    resultElement.textContent = "不正解です。";
    const correctAnswerElement = document.createElement('span');
    correctAnswerElement.textContent = ` 正解: ${currentProblem.answer}`;
    correctAnswerElement.style.color = 'red';
    resultElement.appendChild(correctAnswerElement);
    delay = 1000; // 不正解時の待機時間
  }

  results.push({ question: currentProblem.question, answer: currentProblem.answer, userAnswer });
  problems.shift();

  if (problems.length > 0) {
    setTimeout(showNextProblem, delay);
  } else {
    setTimeout(() => {
      resultElement.textContent = "回答が完了しました。結果を確認しましょう↓ ↓ ↓";
      showResults();
    }, delay);
  }
}

function showNextProblem() {
  const currentProblem = problems[0];
  const questionElement = document.getElementById("question");
  const maskedQuestion = currentProblem.question.replace(
    new RegExp(`\b${currentProblem.answer}\b`, 'gi'),
    (match) => `${match[0]}_`
  );
  questionElement.textContent = maskedQuestion;

  document.getElementById("result").textContent = "";
  document.getElementById("answer").focus();
}

function showResults() {
  const table = document.getElementById("resultTable");

  // 間違えた問題のみ表示
  for (let i = 0; i < results.length; i++) {
    if (results[i].userAnswer !== results[i].answer) {
      const tr = document.createElement('tr');
      const tdQuestion = document.createElement('td');
      const tdUserAnswer = document.createElement('td');
      const tdAnswer = document.createElement('td');

      tdQuestion.textContent = results[i].question;
      tdUserAnswer.textContent = results[i].userAnswer;
      tdAnswer.textContent = results[i].answer;

      tr.appendChild(tdQuestion);
      tr.appendChild(tdUserAnswer);
      tr.appendChild(tdAnswer);

      table.appendChild(tr);
    }
  }
}

// 最初の問題を表示
showNextProblem();

// Enterキーで確定
document.getElementById("answer").addEventListener("keyup", function(event) {
  if (event.keyCode === 13) {
    checkAnswer();
  }
});
</script>
</body>
</html>
