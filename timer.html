<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RTA TIMER</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=DotGothic16&display=swap');

        body {
            margin: 0;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #000; /* 背景を黒に設定 */
            font-family: 'DotGothic16', sans-serif;
            text-align: center;
            cursor: pointer;
            user-select: none; /* テキスト選択を無効化 */
            overflow: hidden; /* はみ出し部分を非表示 */
        }

        .timer-container {
            display: flex; /* 横並び */
            justify-content: center;
            align-items: center;
            white-space: nowrap; /* 折り返しを防止 */
            overflow: hidden; /* はみ出しを防止 */
            width: 100%; /* 全幅 */
        }

        .timer-wrapper {
            display: inline-block;
            font-size: 1em; /* 初期値 */
            line-height: 1; /* 行間を削除 */
            color: #fff; /* 初期色 */
        }

        #global-timer-wrapper {
            color: #0ff; /* 水色 */
        }

        #interactive-timer-wrapper {
            color: #ff0; /* 黄色 */
        }
    </style>
</head>
<body>
    <!-- グローバルタイマー -->
    <div class="timer-container">
        <div id="global-timer-wrapper" class="timer-wrapper">RTA: 00:00:000</div>
    </div>
    
    <!-- インタラクティブタイマー -->
    <div class="timer-container">
        <div id="interactive-timer-wrapper" class="timer-wrapper">IGT: 00:00:000</div>
    </div>

    <script>
        let globalStartTime = null; // グローバルタイマーの開始時刻
        let globalTimerInterval = null; // グローバルタイマーのsetInterval ID

        let interactiveStartTime = 0; // インタラクティブタイマーの開始時刻
        let interactiveElapsedTime = 0; // インタラクティブタイマー経過時間
        let interactiveTimerInterval = null; // インタラクティブタイマーのsetInterval ID

        let isFirstClick = true; // 最初のクリックかどうかを判定

        // グローバルタイマーの更新
        function updateGlobalTimer() {
            const currentTime = Date.now();
            const totalElapsed = currentTime - globalStartTime;

            const minutes = String(Math.floor(totalElapsed / 60000)).padStart(2, '0');
            const seconds = String(Math.floor((totalElapsed % 60000) / 1000)).padStart(2, '0');
            const milliseconds = String(totalElapsed % 1000).padStart(3, '0');

            document.getElementById('global-timer-wrapper').textContent = `RTA: ${minutes}:${seconds}:${milliseconds}`;
        }

        // インタラクティブタイマーの更新
        function updateInteractiveTimer() {
            const currentTime = Date.now();
            const totalElapsed = interactiveElapsedTime + (currentTime - interactiveStartTime);

            const minutes = String(Math.floor(totalElapsed / 60000)).padStart(2, '0');
            const seconds = String(Math.floor((totalElapsed % 60000) / 1000)).padStart(2, '0');
            const milliseconds = String(totalElapsed % 1000).padStart(3, '0');

            document.getElementById('interactive-timer-wrapper').textContent = `IGT: ${minutes}:${seconds}:${milliseconds}`;
        }

        // インタラクティブタイマーのスタート/ストップ切り替え
        function toggleInteractiveTimer() {
            if (interactiveTimerInterval) {
                // タイマーが動作中なら停止
                clearInterval(interactiveTimerInterval);
                interactiveTimerInterval = null;
                interactiveElapsedTime += Date.now() - interactiveStartTime; // 経過時間を保存
            } else {
                // タイマーが停止中なら開始
                interactiveStartTime = Date.now();
                interactiveTimerInterval = setInterval(updateInteractiveTimer, 10);
            }
        }

        // 最初のクリックでRTAタイマーを開始
        function handleFirstClick() {
            if (isFirstClick) {
                globalStartTime = Date.now(); // RTAタイマー開始時刻を記録
                globalTimerInterval = setInterval(updateGlobalTimer, 10); // RTAタイマーの更新を開始
                isFirstClick = false; // 最初のクリックフラグを解除
            }
            toggleInteractiveTimer(); // インタラクティブタイマーも切り替える
        }

        // レスポンシブなフォントサイズの調整
        function adjustFontSize() {
            const containers = document.querySelectorAll('.timer-container');
            const margin = 10; // 画面端からの余白
            containers.forEach(container => {
                const wrapper = container.querySelector('.timer-wrapper');
                
                let fontSize = 100; // 初期フォントサイズ
                wrapper.style.fontSize = `${fontSize}px`;

                // フォントサイズを調整して横幅に収める
                while (wrapper.offsetWidth > window.innerWidth - margin) {
                    fontSize -= 1;
                    wrapper.style.fontSize = `${fontSize}px`;
                }
            });
        }

        // ウィンドウのリサイズ時にフォントサイズを調整
        window.addEventListener('resize', adjustFontSize);

        // 初期設定
        document.body.addEventListener('click', handleFirstClick);
        adjustFontSize(); // 初回読み込み時にもフォントサイズを調整
    </script>
</body>
</html>
